var margin;
var state = "open";
$(document).ready(function(){
	var isMobile = window.matchMedia("only screen and (max-width: 1023px)");
	if (isMobile.matches) 
	{
        state = "closed";
    }
	else
	{
		getSidebarState();
	}
	//ContentFix
	$("#navigation").html("<");
	if(state != "closed")
	{
		Open();
		$("#navigation").click(SlideIn);
	}
	else
	{
		Close();
		$("#navigation").click(SlideOut);
	}
});

function setSidebarState(newState) {
    eraseCookie("doc_Sidebar_State");
    createCookie("doc_Sidebar_State", newState, 30);
}

function getSidebarState() {
	var cookie = readCookie("doc_Sidebar_State");
    state = cookie != null ? cookie : state;
}

//******************** NAVIGATION PANEL FUNCTIONS *********************//
// Slides the panel into and out of view and fixes the margins and
// positions of the inner elements so that everything remains uniform
function SlideIn(){
	//get DOM elements
	//var navPanel = document.getElementById("navPanel");
	//var navigationButton = document.getElementById("navigation");
	//var navigationWrapper = document.getElementById("navWrapper");
	//var pageDefault = document.getElementById("contentContainer");	
	
	//set transitions
	//navPanel.style.transition = "left 0.5s linear 0s";
	//navigationButton.style.transition = "left 0.5s linear 0s";
	//navigationWrapper.style.transition = "width 0.5s linear 0s";
	//pageDefault.style.transition = "margin-left 0.5s linear 0s";
	
	//Perform page transitions to hide navBar
	$("#navPanel").addClass("collapsed");
	//navPanel.style.left = "-300px";
	$("#navigation").addClass("collapsed");
	//navigationButton.style.left = "-8px";
	$("#navWrapper").addClass("collapsed");
	//navigationWrapper.style.width = "0px";
	$("#contentContainer").addClass("collapsed");
	//pageDefault.style.marginLeft = "0px";
	
	//ContentFix
	$("#navigation").html(">");
	
	//attach new event handlers
	$("#navigation").off("click");
	$("#navigation").on("click", SlideOut);
	setSidebarState("closed");
}

function SlideOut(){
	//get DOM elements
	//var navPanel = document.getElementById("navPanel");
	//var navigationButton = document.getElementById("navigation");
	//var navigationWrapper = document.getElementById("navWrapper");
	//var pageDefault = document.getElementById("contentContainer");	
	
	//set transitions
	//navPanel.style.transition = "left 0.5s linear 0s";
	//navigationButton.style.transition = "left 0.5s linear 0s";
	//navigationWrapper.style.transition = "width 0.5s linear 0s";
	//pageDefault.style.transition = "margin-left 0.5s linear 0s";
	
	//Perform page transitions to hide navBar
	$("#navPanel").removeClass("collapsed");
	//navPanel.style.left = "0px";
	$("#navigation").removeClass("collapsed");
	//navigationButton.style.left = "292px";
	$("#navWrapper").removeClass("collapsed");
	//navigationWrapper.style.width = "300px";
	$("#contentContainer").removeClass("collapsed");
	//pageDefault.style.marginLeft = "300px";
	
	//ContentFix
	$("#navigation").html("<");
	
	//attach new event handlers
	$("#navigation").off("click");
	$("#navigation").on("click", SlideIn);
	setSidebarState("open");
}

function setInstant()
{	
	$("#navPanel").addClass("instant");
	$("#navigation").addClass("instant");
	$("#navWrapper").addClass("instant");
	$("#contentContainer").addClass("instant");
}

function clearInstant()
{	
	$("#contentContainer").removeClass("instant");
	$("#navWrapper").removeClass("instant");
	$("#navigation").removeClass("instant");
	$("#navPanel").removeClass("instant");
}

function Close(){
	//get DOM elements
	//var navPanel = document.getElementById("navPanel");
	//var navigationButton = document.getElementById("navigation");
	//var navigationWrapper = document.getElementById("navWrapper");
	//var pageDefault = document.getElementById("contentContainer");	
	
	//set transitions
	//navPanel.style.transition = "left 0s linear 0s";
	//navigationButton.style.transition = "left 0s linear 0s";
	//navigationWrapper.style.transition = "width 0s linear 0s";
	//pageDefault.style.transition = "margin-left 0s linear 0s";
	
	setInstant();
	//Perform page transitions to hide navBar
	$("#navPanel").addClass("collapsed");
	//navPanel.style.left = "-300px";
	$("#navigation").addClass("collapsed");
	//navigationButton.style.left = "-8px";
	$("#navWrapper").addClass("collapsed");
	//navigationWrapper.style.width = "0px";
	$("#contentContainer").addClass("collapsed");
	//pageDefault.style.marginLeft = "0px";
	setTimeout("clearInstant()", 500);
	
	//ContentFix
	$("#navigation").html(">");
	
	//attach new event handlers
	$("#navigation").off("click");
	$("#navigation").on("click", SlideOut);
	setSidebarState("closed");
	
}

function Open(){
	//get DOM elements
	//var navPanel = document.getElementById("navPanel");
	//var navigationButton = document.getElementById("navigation");
	//var navigationWrapper = document.getElementById("navWrapper");
	//var pageDefault = document.getElementById("contentContainer");	
	
	//set transitions
	//navPanel.style.transition = "left 0s linear 0s";
	//navigationButton.style.transition = "left 0s linear 0s";
	//navigationWrapper.style.transition = "width 0s linear 0s";
	//pageDefault.style.transition = "margin-left 0s linear 0s";
	
	setInstant();
	//Perform page transitions to hide navBar
	$("#navPanel").removeClass("collapsed");
	//navPanel.style.left = "-300px";
	$("#navigation").removeClass("collapsed");
	//navigationButton.style.left = "-8px";
	$("#navWrapper").removeClass("collapsed");
	//navigationWrapper.style.width = "0px";
	$("#contentContainer").removeClass("collapsed");
	//pageDefault.style.marginLeft = "300px";
	setTimeout("clearInstant()", 500);
	
	//ContentFix
	$("#navigation").html("<");
	
	//attach new event handlers
	$("#navigation").off("click");
	$("#navigation").on("click", SlideIn);
	setSidebarState("open");
}
//
//***************** END NAVIGATION PANEL FUNCTIONS *********************//